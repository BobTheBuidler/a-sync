<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>a_sync.utils package &mdash; ez-a-sync  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ez-a-sync
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">a_sync.utils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-a_sync.utils.as_completed">a_sync.utils.as_completed module</a><ul>
<li><a class="reference internal" href="#a_sync.utils.as_completed.tqdm_asyncio"><code class="docutils literal notranslate"><span class="pre">tqdm_asyncio</span></code></a><ul>
<li><a class="reference internal" href="#a_sync.utils.as_completed.tqdm_asyncio.as_completed"><code class="docutils literal notranslate"><span class="pre">tqdm_asyncio.as_completed()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#a_sync.utils.as_completed.__mapping_wrap"><code class="docutils literal notranslate"><span class="pre">__mapping_wrap()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.as_completed.__yield_as_completed"><code class="docutils literal notranslate"><span class="pre">__yield_as_completed()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.as_completed._exc_wrap"><code class="docutils literal notranslate"><span class="pre">_exc_wrap()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.as_completed.as_completed"><code class="docutils literal notranslate"><span class="pre">as_completed()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.as_completed.as_completed_mapping"><code class="docutils literal notranslate"><span class="pre">as_completed_mapping()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-a_sync.utils.gather">a_sync.utils.gather module</a><ul>
<li><a class="reference internal" href="#a_sync.utils.gather.tqdm_asyncio"><code class="docutils literal notranslate"><span class="pre">tqdm_asyncio</span></code></a><ul>
<li><a class="reference internal" href="#a_sync.utils.gather.tqdm_asyncio.gather"><code class="docutils literal notranslate"><span class="pre">tqdm_asyncio.gather()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#a_sync.utils.gather._is_mapping"><code class="docutils literal notranslate"><span class="pre">_is_mapping()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.gather.gather"><code class="docutils literal notranslate"><span class="pre">gather()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.gather.gather_mapping"><code class="docutils literal notranslate"><span class="pre">gather_mapping()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-a_sync.utils.iterators">a_sync.utils.iterators module</a><ul>
<li><a class="reference internal" href="#a_sync.utils.iterators._Done"><code class="docutils literal notranslate"><span class="pre">_Done</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.iterators.as_yielded"><code class="docutils literal notranslate"><span class="pre">as_yielded()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.iterators.exhaust_iterator"><code class="docutils literal notranslate"><span class="pre">exhaust_iterator()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.iterators.exhaust_iterators"><code class="docutils literal notranslate"><span class="pre">exhaust_iterators()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-a_sync.utils">Module contents</a><ul>
<li><a class="reference internal" href="#a_sync.utils.all"><code class="docutils literal notranslate"><span class="pre">all()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.any"><code class="docutils literal notranslate"><span class="pre">any()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.as_completed"><code class="docutils literal notranslate"><span class="pre">as_completed()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.as_yielded"><code class="docutils literal notranslate"><span class="pre">as_yielded()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.exhaust_iterator"><code class="docutils literal notranslate"><span class="pre">exhaust_iterator()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.exhaust_iterators"><code class="docutils literal notranslate"><span class="pre">exhaust_iterators()</span></code></a></li>
<li><a class="reference internal" href="#a_sync.utils.gather"><code class="docutils literal notranslate"><span class="pre">gather()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ez-a-sync</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">a_sync.utils package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/a_sync.utils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="a-sync-utils-package">
<h1>a_sync.utils package<a class="headerlink" href="#a-sync-utils-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-a_sync.utils.as_completed">
<span id="a-sync-utils-as-completed-module"></span><h2>a_sync.utils.as_completed module<a class="headerlink" href="#module-a_sync.utils.as_completed" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="a_sync.utils.as_completed.tqdm_asyncio">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.as_completed.</span></span><span class="sig-name descname"><span class="pre">tqdm_asyncio</span></span><a class="headerlink" href="#a_sync.utils.as_completed.tqdm_asyncio" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.utils.as_completed.tqdm_asyncio.as_completed">
<span class="sig-name descname"><span class="pre">as_completed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.as_completed.tqdm_asyncio.as_completed" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.as_completed.__mapping_wrap">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.as_completed.</span></span><span class="sig-name descname"><span class="pre">__mapping_wrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.as_completed.__mapping_wrap" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k</strong> (<em>K</em>) – </p></li>
<li><p><strong>v</strong> (<em>Awaitable</em><em>[</em><em>V</em><em>]</em>) – </p></li>
<li><p><strong>return_exceptions</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>V</em> | Exception</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.as_completed.__yield_as_completed">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.as_completed.</span></span><span class="sig-name descname"><span class="pre">__yield_as_completed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">futs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tqdm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.as_completed.__yield_as_completed" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>futs</strong> (<em>Iterable</em><em>[</em><em>Awaitable</em><em>[</em><em>T</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>timeout</strong> (<em>float</em><em> | </em><em>None</em>) – </p></li>
<li><p><strong>return_exceptions</strong> (<em>bool</em>) – </p></li>
<li><p><strong>tqdm</strong> (<em>bool</em>) – </p></li>
<li><p><strong>tqdm_kwargs</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>AsyncIterator</em>[<em>T</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.as_completed._exc_wrap">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.as_completed.</span></span><span class="sig-name descname"><span class="pre">_exc_wrap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">awaitable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.as_completed._exc_wrap" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>awaitable</strong> (<em>Awaitable</em><em>[</em><em>T</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>T</em> | Exception</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.as_completed.as_completed">
<span class="sig-prename descclassname"><span class="pre">a_sync.utils.as_completed.</span></span><span class="sig-name descname"><span class="pre">as_completed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tqdm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.as_completed.as_completed" title="Link to this definition"></a></dt>
<dd><p>Concurrently awaits a list of awaitable objects or mappings of awaitables and returns an iterator of results.</p>
<p>This function extends Python’s asyncio.as_completed, providing additional features for mixed use cases of individual awaitable objects and mappings of awaitables.</p>
<p>Differences from asyncio.as_completed:
- Uses type hints for use with static type checkers.
- Supports either individual awaitables or a k:v mapping of awaitables.
- Can be used as an async iterator which yields the result values. Example below.
- Provides progress reporting using tqdm if ‘tqdm’ is set to True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fs</strong> (<em>Iterable</em><em>[</em><em>Awaitable</em><em>[</em><em>T</em><em>] or </em><em>Mapping</em><em>[</em><em>K</em><em>, </em><em>Awaitable</em><em>[</em><em>V</em><em>]</em><em>]</em><em>]</em>) – The awaitables to await concurrently. It can be a list of individual awaitables or a mapping of awaitables.</p></li>
<li><p><strong>timeout</strong> (<em>float</em><em>, </em><em>optional</em>) – The maximum time, in seconds, to wait for the completion of awaitables. Defaults to None (no timeout).</p></li>
<li><p><strong>return_exceptions</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, exceptions are returned as results instead of raising them. Defaults to False.</p></li>
<li><p><strong>aiter</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, returns an async iterator of results. Defaults to False.</p></li>
<li><p><strong>tqdm</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, enables progress reporting using tqdm. Defaults to False.</p></li>
<li><p><strong>**tqdm_kwargs</strong> – Additional keyword arguments for tqdm if progress reporting is enabled.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator of results when awaiting individual awaitables or an async iterator when awaiting mappings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Iterator[Coroutine[None, None, T] or <a class="reference internal" href="a_sync.html#a_sync.iter.ASyncIterator" title="a_sync.iter.ASyncIterator">ASyncIterator</a>[Tuple[K, V]]]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Awaiting individual awaitables:
<a href="#id1"><span class="problematic" id="id2">``</span></a>`
awaitables = [async_function1(), async_function2()]
for coro in as_completed(awaitables):</p>
<blockquote>
<div><p>val = await coro
…</p>
</div></blockquote>
<dl class="simple">
<dt>async for val in as_completed(awaitables, aiter=True):</dt><dd><p>…</p>
</dd>
</dl>
<p><a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></p>
<p>Awaiting mappings of awaitables:
<a href="#id7"><span class="problematic" id="id8">``</span></a>`
mapping = {‘key1’: async_function1(), ‘key2’: async_function2()}</p>
<dl class="simple">
<dt>for coro in as_completed(mapping):</dt><dd><p>k, v = await coro
…</p>
</dd>
<dt>async for k, v in as_completed(mapping, aiter=True):</dt><dd><p>…</p>
</dd>
</dl>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.as_completed.as_completed_mapping">
<span class="sig-prename descclassname"><span class="pre">a_sync.utils.as_completed.</span></span><span class="sig-name descname"><span class="pre">as_completed_mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tqdm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.as_completed.as_completed_mapping" title="Link to this definition"></a></dt>
<dd><p>Concurrently awaits a mapping of awaitable objects and returns an iterator or async iterator of results.</p>
<p>This function is designed to await a mapping of awaitable objects, where each key-value pair represents a unique awaitable. It enables concurrent execution and gathers results into an iterator or an async iterator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mapping</strong> (<em>Mapping</em><em>[</em><em>K</em><em>, </em><em>Awaitable</em><em>[</em><em>V</em><em>]</em><em>]</em>) – A dictionary-like object where keys are of type K and values are awaitable objects of type V.</p></li>
<li><p><strong>timeout</strong> (<em>float</em><em>, </em><em>optional</em>) – The maximum time, in seconds, to wait for the completion of awaitables. Defaults to None (no timeout).</p></li>
<li><p><strong>return_exceptions</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, exceptions are returned as results instead of raising them. Defaults to False.</p></li>
<li><p><strong>aiter</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, returns an async iterator of results. Defaults to False.</p></li>
<li><p><strong>tqdm</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, enables progress reporting using tqdm. Defaults to False.</p></li>
<li><p><strong>**tqdm_kwargs</strong> – Additional keyword arguments for tqdm if progress reporting is enabled.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator of results or an async iterator when awaiting mappings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[Iterator[Coroutine[None, None, Tuple[K, V]]] or <a class="reference internal" href="a_sync.html#a_sync.iter.ASyncIterator" title="a_sync.iter.ASyncIterator">ASyncIterator</a>[Tuple[K, V]]]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a>`
mapping = {‘key1’: async_function1(), ‘key2’: async_function2()}</p>
<dl class="simple">
<dt>for coro in as_completed_mapping(mapping):</dt><dd><p>k, v = await coro
…</p>
</dd>
<dt>async for k, v in as_completed_mapping(mapping, aiter=True):</dt><dd><p>…</p>
</dd>
</dl>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a><a href="#id17"><span class="problematic" id="id18">`</span></a></p>
</dd></dl>

</section>
<section id="module-a_sync.utils.gather">
<span id="a-sync-utils-gather-module"></span><h2>a_sync.utils.gather module<a class="headerlink" href="#module-a_sync.utils.gather" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="a_sync.utils.gather.tqdm_asyncio">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.gather.</span></span><span class="sig-name descname"><span class="pre">tqdm_asyncio</span></span><a class="headerlink" href="#a_sync.utils.gather.tqdm_asyncio" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.utils.gather.tqdm_asyncio.gather">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">gather</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.gather.tqdm_asyncio.gather" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.gather._is_mapping">
<span class="sig-prename descclassname"><span class="pre">a_sync.utils.gather.</span></span><span class="sig-name descname"><span class="pre">_is_mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">awaitables</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.gather._is_mapping" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.gather.gather">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.gather.</span></span><span class="sig-name descname"><span class="pre">gather</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">awaitables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><span class="pre">K</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Awaitable</span><span class="p"><span class="pre">[</span></span><span class="pre">V</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_if</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tqdm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">K</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">V</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.utils.gather.gather" title="Link to this definition"></a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.gather.</span></span><span class="sig-name descname"><span class="pre">gather</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">awaitables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Awaitable</span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_if</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tqdm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Concurrently awaits a list of awaitable objects or mappings of awaitables and returns the results.</p>
<p>This function extends Python’s asyncio.gather, providing additional features for mixed use cases of individual awaitable objects and mappings of awaitables.</p>
<p>Differences from asyncio.gather:
- Uses type hints for use with static type checkers.
- Supports gathering either individual awaitables or a k:v mapping of awaitables.
- Provides progress reporting using tqdm if ‘tqdm’ is set to True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*awaitables</strong> (<em>Union</em><em>[</em><em>Awaitable</em><em>[</em><em>T</em><em>]</em><em>, </em><em>Mapping</em><em>[</em><em>K</em><em>, </em><em>Awaitable</em><em>[</em><em>V</em><em>]</em><em>]</em><em>]</em>) – The awaitables to await concurrently. It can be a single awaitable or a mapping of awaitables.</p></li>
<li><p><strong>return_exceptions</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, exceptions are returned as results instead of raising them. Defaults to False.</p></li>
<li><p><strong>tqdm</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, enables progress reporting using tqdm. Defaults to False.</p></li>
<li><p><strong>**tqdm_kwargs</strong> – Additional keyword arguments for tqdm if progress reporting is enabled.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of results when awaiting individual awaitables or a dictionary of results when awaiting mappings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[List[T], Dict[K, V]]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Awaiting individual awaitables:
results will be a list containing the result of each awaitable in sequential order
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">results</span> <span class="pre">=</span> <span class="pre">await</span> <span class="pre">gather(thing1(),</span> <span class="pre">thing2())</span>
<span class="pre">`</span></code></p>
<p>Awaiting mappings of awaitables
results will be a dictionary with ‘key1’ mapped to the result of thing1() and ‘key2’ mapped to the result of thing2.
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">mapping</span> <span class="pre">=</span> <span class="pre">{'key1':</span> <span class="pre">thing1(),</span> <span class="pre">'key2':</span> <span class="pre">thing2()}</span>
<span class="pre">results</span> <span class="pre">=</span> <span class="pre">await</span> <span class="pre">gather(mapping)</span>
<span class="pre">`</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.gather.gather_mapping">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.gather.</span></span><span class="sig-name descname"><span class="pre">gather_mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tqdm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.gather.gather_mapping" title="Link to this definition"></a></dt>
<dd><p>Concurrently awaits a mapping of awaitable objects and returns a dictionary of results.</p>
<p>This function is designed to await a mapping of awaitable objects, where each key-value pair represents a unique awaitable. It enables concurrent execution and gathers results into a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mapping</strong> (<em>Mapping</em><em>[</em><em>K</em><em>, </em><em>Awaitable</em><em>[</em><em>V</em><em>]</em><em>]</em>) – A dictionary-like object where keys are of type K and values are awaitable objects of type V.</p></li>
<li><p><strong>return_exceptions</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, exceptions are returned as results instead of raising them. Defaults to False.</p></li>
<li><p><strong>tqdm</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, enables progress reporting using tqdm. Defaults to False.</p></li>
<li><p><strong>**tqdm_kwargs</strong> – Additional keyword arguments for tqdm if progress reporting is enabled.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary with keys corresponding to the keys of the input mapping and values containing the results of the corresponding awaitables.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[K, V]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The ‘results’ dictionary will contain the awaited results, where keys match the keys in the ‘mapping’ and values contain the results of the corresponding awaitables.
<a href="#id19"><span class="problematic" id="id20">``</span></a>`
mapping = {‘task1’: async_function1(), ‘task2’: async_function2(), ‘task3’: async_function3()}</p>
<p>results = await gather_mapping(mapping)
<a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
</dd></dl>

</section>
<section id="module-a_sync.utils.iterators">
<span id="a-sync-utils-iterators-module"></span><h2>a_sync.utils.iterators module<a class="headerlink" href="#module-a_sync.utils.iterators" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="a_sync.utils.iterators._Done">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.iterators.</span></span><span class="sig-name descname"><span class="pre">_Done</span></span><a class="headerlink" href="#a_sync.utils.iterators._Done" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A sentinel class used to signal the completion of processing in the as_yielded function.</p>
<p>This class acts as a marker to indicate that all items have been processed and the asynchronous iteration can be concluded. It is used internally within the implementation of as_yielded to efficiently manage the termination of the iteration process once all source iterators have been exhausted.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.iterators.as_yielded">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.iterators.</span></span><span class="sig-name descname"><span class="pre">as_yielded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">iterators</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.iterators.as_yielded" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><p>Merges multiple async iterators into a single async iterator that yields items as they become available from any of the source iterators.</p>
<p>This function is designed to streamline the handling of multiple asynchronous data streams by consolidating them into a single asynchronous iteration context. It enables concurrent fetching and processing of items from multiple sources, improving efficiency and simplifying code structure when dealing with asynchronous operations.</p>
<p>The merging process is facilitated by internally managing a queue where items from the source iterators are placed as they are fetched. This mechanism ensures that the merged stream of items is delivered in an order determined by the availability of items from the source iterators, rather than their original sequence.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*iterators</strong> (<em>AsyncIterator</em><em>[</em><em>T</em><em>]</em>) – Variable length list of AsyncIterator objects to be merged.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An async iterator that yields items from the input async iterators as they become available.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>AsyncIterator[T]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This implementation leverages asyncio tasks and queues to efficiently manage the asynchronous iteration and merging process. It handles edge cases such as early termination and exception management, ensuring robustness and reliability.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.iterators.exhaust_iterator">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.iterators.</span></span><span class="sig-name descname"><span class="pre">exhaust_iterator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterator</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.iterators.exhaust_iterator" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><p>Asynchronously iterates over items from the given async iterator and optionally places them into a queue.</p>
<p>This function is a utility to exhaust an async iterator, with an option to forward the iterated items to a provided asyncio.Queue. It’s particularly useful when dealing with asynchronous operations that produce items to be consumed by other parts of an application, enabling a producer-consumer pattern.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterator</strong> (<em>AsyncIterator</em><em>[</em><em>T</em><em>]</em>) – The async iterator to exhaust.</p></li>
<li><p><strong>queue</strong> (<em>Optional</em><em>[</em><em>asyncio.Queue</em><em>]</em>) – An optional queue where iterated items will be placed. If None, items are simply consumed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.iterators.exhaust_iterators">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.iterators.</span></span><span class="sig-name descname"><span class="pre">exhaust_iterators</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterators</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.iterators.exhaust_iterators" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><p>Asynchronously iterates over multiple async iterators concurrently and optionally places their items into a queue.</p>
<p>This function leverages asyncio.gather to concurrently exhaust multiple async iterators. It’s useful in scenarios where items from multiple async sources need to be processed or collected together, supporting concurrent operations and efficient multitasking.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterators</strong> – A sequence of async iterators to be exhausted concurrently.</p></li>
<li><p><strong>queue</strong> (<em>Optional</em><em>[</em><em>asyncio.Queue</em><em>]</em>) – An optional queue where items from all iterators will be placed. If None, items are simply consumed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-a_sync.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-a_sync.utils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.all">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.</span></span><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">awaitables</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.all" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.any">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.</span></span><span class="sig-name descname"><span class="pre">any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">awaitables</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.any" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.as_completed">
<span class="sig-prename descclassname"><span class="pre">a_sync.utils.</span></span><span class="sig-name descname"><span class="pre">as_completed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tqdm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.as_completed" title="Link to this definition"></a></dt>
<dd><p>Concurrently awaits a list of awaitable objects or mappings of awaitables and returns an iterator of results.</p>
<p>This function extends Python’s asyncio.as_completed, providing additional features for mixed use cases of individual awaitable objects and mappings of awaitables.</p>
<p>Differences from asyncio.as_completed:
- Uses type hints for use with static type checkers.
- Supports either individual awaitables or a k:v mapping of awaitables.
- Can be used as an async iterator which yields the result values. Example below.
- Provides progress reporting using tqdm if ‘tqdm’ is set to True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fs</strong> (<em>Iterable</em><em>[</em><em>Awaitable</em><em>[</em><em>T</em><em>] or </em><em>Mapping</em><em>[</em><em>K</em><em>, </em><em>Awaitable</em><em>[</em><em>V</em><em>]</em><em>]</em><em>]</em>) – The awaitables to await concurrently. It can be a list of individual awaitables or a mapping of awaitables.</p></li>
<li><p><strong>timeout</strong> (<em>float</em><em>, </em><em>optional</em>) – The maximum time, in seconds, to wait for the completion of awaitables. Defaults to None (no timeout).</p></li>
<li><p><strong>return_exceptions</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, exceptions are returned as results instead of raising them. Defaults to False.</p></li>
<li><p><strong>aiter</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, returns an async iterator of results. Defaults to False.</p></li>
<li><p><strong>tqdm</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, enables progress reporting using tqdm. Defaults to False.</p></li>
<li><p><strong>**tqdm_kwargs</strong> – Additional keyword arguments for tqdm if progress reporting is enabled.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterator of results when awaiting individual awaitables or an async iterator when awaiting mappings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Iterator[Coroutine[None, None, T] or <a class="reference internal" href="a_sync.html#a_sync.iter.ASyncIterator" title="a_sync.iter.ASyncIterator">ASyncIterator</a>[Tuple[K, V]]]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Awaiting individual awaitables:
<a href="#id25"><span class="problematic" id="id26">``</span></a>`
awaitables = [async_function1(), async_function2()]
for coro in as_completed(awaitables):</p>
<blockquote>
<div><p>val = await coro
…</p>
</div></blockquote>
<dl class="simple">
<dt>async for val in as_completed(awaitables, aiter=True):</dt><dd><p>…</p>
</dd>
</dl>
<p><a href="#id27"><span class="problematic" id="id28">``</span></a><a href="#id29"><span class="problematic" id="id30">`</span></a></p>
<p>Awaiting mappings of awaitables:
<a href="#id31"><span class="problematic" id="id32">``</span></a>`
mapping = {‘key1’: async_function1(), ‘key2’: async_function2()}</p>
<dl class="simple">
<dt>for coro in as_completed(mapping):</dt><dd><p>k, v = await coro
…</p>
</dd>
<dt>async for k, v in as_completed(mapping, aiter=True):</dt><dd><p>…</p>
</dd>
</dl>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.as_yielded">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.</span></span><span class="sig-name descname"><span class="pre">as_yielded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">iterators</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.as_yielded" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><p>Merges multiple async iterators into a single async iterator that yields items as they become available from any of the source iterators.</p>
<p>This function is designed to streamline the handling of multiple asynchronous data streams by consolidating them into a single asynchronous iteration context. It enables concurrent fetching and processing of items from multiple sources, improving efficiency and simplifying code structure when dealing with asynchronous operations.</p>
<p>The merging process is facilitated by internally managing a queue where items from the source iterators are placed as they are fetched. This mechanism ensures that the merged stream of items is delivered in an order determined by the availability of items from the source iterators, rather than their original sequence.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*iterators</strong> (<em>AsyncIterator</em><em>[</em><em>T</em><em>]</em>) – Variable length list of AsyncIterator objects to be merged.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An async iterator that yields items from the input async iterators as they become available.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>AsyncIterator[T]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This implementation leverages asyncio tasks and queues to efficiently manage the asynchronous iteration and merging process. It handles edge cases such as early termination and exception management, ensuring robustness and reliability.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.exhaust_iterator">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.</span></span><span class="sig-name descname"><span class="pre">exhaust_iterator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterator</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.exhaust_iterator" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><p>Asynchronously iterates over items from the given async iterator and optionally places them into a queue.</p>
<p>This function is a utility to exhaust an async iterator, with an option to forward the iterated items to a provided asyncio.Queue. It’s particularly useful when dealing with asynchronous operations that produce items to be consumed by other parts of an application, enabling a producer-consumer pattern.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterator</strong> (<em>AsyncIterator</em><em>[</em><em>T</em><em>]</em>) – The async iterator to exhaust.</p></li>
<li><p><strong>queue</strong> (<em>Optional</em><em>[</em><em>asyncio.Queue</em><em>]</em>) – An optional queue where iterated items will be placed. If None, items are simply consumed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.exhaust_iterators">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.</span></span><span class="sig-name descname"><span class="pre">exhaust_iterators</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterators</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.exhaust_iterators" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><p>Asynchronously iterates over multiple async iterators concurrently and optionally places their items into a queue.</p>
<p>This function leverages asyncio.gather to concurrently exhaust multiple async iterators. It’s useful in scenarios where items from multiple async sources need to be processed or collected together, supporting concurrent operations and efficient multitasking.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterators</strong> – A sequence of async iterators to be exhausted concurrently.</p></li>
<li><p><strong>queue</strong> (<em>Optional</em><em>[</em><em>asyncio.Queue</em><em>]</em>) – An optional queue where items from all iterators will be placed. If None, items are simply consumed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.utils.gather">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.utils.</span></span><span class="sig-name descname"><span class="pre">gather</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">awaitables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_if</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tqdm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tqdm_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.utils.gather" title="Link to this definition"></a></dt>
<dd><p>Concurrently awaits a list of awaitable objects or mappings of awaitables and returns the results.</p>
<p>This function extends Python’s asyncio.gather, providing additional features for mixed use cases of individual awaitable objects and mappings of awaitables.</p>
<p>Differences from asyncio.gather:
- Uses type hints for use with static type checkers.
- Supports gathering either individual awaitables or a k:v mapping of awaitables.
- Provides progress reporting using tqdm if ‘tqdm’ is set to True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*awaitables</strong> (<em>Awaitable</em><em>[</em><em>T</em><em>] </em><em>| </em><em>Mapping</em><em>[</em><em>K</em><em>, </em><em>Awaitable</em><em>[</em><em>V</em><em>]</em><em>]</em>) – The awaitables to await concurrently. It can be a single awaitable or a mapping of awaitables.</p></li>
<li><p><strong>return_exceptions</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, exceptions are returned as results instead of raising them. Defaults to False.</p></li>
<li><p><strong>tqdm</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, enables progress reporting using tqdm. Defaults to False.</p></li>
<li><p><strong>**tqdm_kwargs</strong> – Additional keyword arguments for tqdm if progress reporting is enabled.</p></li>
<li><p><strong>exclude_if</strong> (<em>Callable</em><em>[</em><em>[</em><em>T</em><em>]</em><em>, </em><em>bool</em><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of results when awaiting individual awaitables or a dictionary of results when awaiting mappings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[List[T], Dict[K, V]]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Awaiting individual awaitables:
results will be a list containing the result of each awaitable in sequential order
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">results</span> <span class="pre">=</span> <span class="pre">await</span> <span class="pre">gather(thing1(),</span> <span class="pre">thing2())</span>
<span class="pre">`</span></code></p>
<p>Awaiting mappings of awaitables
results will be a dictionary with ‘key1’ mapped to the result of thing1() and ‘key2’ mapped to the result of thing2.
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">mapping</span> <span class="pre">=</span> <span class="pre">{'key1':</span> <span class="pre">thing1(),</span> <span class="pre">'key2':</span> <span class="pre">thing2()}</span>
<span class="pre">results</span> <span class="pre">=</span> <span class="pre">await</span> <span class="pre">gather(mapping)</span>
<span class="pre">`</span></code></p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, BobTheBuidler.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>